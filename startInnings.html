<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Start Innings</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<style>
body{font-family:Arial;background:#f2f4f8;padding:20px}
.box{background:#fff;padding:16px;border-radius:12px;max-width:420px;margin:auto}
select,button{width:100%;padding:12px;margin:8px 0;font-size:16px}
button{background:#0a7cff;color:#fff;border:none;border-radius:8px}
.info{font-size:14px;color:#555;margin-top:6px}
</style>
</head>
<body>

<div class="box">
<h2>Start First Innings</h2>

<select id="matchSelect" onchange="showMatch()">
<option value="">-- Select Match --</option>
</select>

<div class="info" id="teams"></div>

<button onclick="startInnings()">START INNINGS</button>
</div>

<script>
const API="https://script.google.com/macros/s/AKfycbwoc84x0cmXWJ6GHzEae4kTJCMdEyvlK7NKq7m12oE6getykgU0UuUUpc37LZcoCuI/exec";

let matches=[];

fetch(`${API}?action=getMatches`)
.then(r=>r.json())
.then(d=>{
  matches=d.matches||[];
  let html='<option value="">-- Select Match --</option>';
  matches.forEach(m=>{
    html+=`<option value="${m.matchId}">${m.matchId} | ${m.teamAId} vs ${m.teamBId}</option>`;
  });
  matchSelect.innerHTML=html;
});

function showMatch(){
const id=matchSelect.value;
const m=matches.find(x=>x.matchId===id);
if(!m){teams.innerHTML="";return;}
teams.innerHTML=`${m.teamAId} vs ${m.teamBId}<br>Overs: ${m.overs}`;
}

function startInnings(){
const id=matchSelect.value;
if(!id)return alert("Select match");

fetch(`${API}?action=startFirstInnings&matchId=${id}`)
.then(r=>r.json())
.then(d=>{
  if(d.status==="ok"){
    alert("1st Innings Started âœ…");
  }else{
    alert("Error: "+d.message);
  }
});
}
</script>
</body>
</html>
