<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Create Team</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
body{font-family:Arial;background:#f2f4f8;margin:0}
.header{background:#0a7cff;color:#fff;padding:14px;text-align:center}
.card{background:#fff;margin:12px;padding:12px;border-radius:8px}
input,button{width:100%;padding:10px;margin-top:8px}
button{background:#0a7cff;color:#fff;border:none;border-radius:6px}
</style>
</head>

<body>

<div class="header">üèè Create Team</div>

<div class="card">
  <input id="teamName" placeholder="Enter Team Name">
  <!-- üîí important: type="button" -->
  <button type="button" onclick="createTeam()">Create Team</button>
</div>

<div class="card">
  <h3>Teams</h3>
  <ul id="teams"></ul>
</div>

<script>
const API = "https://script.google.com/macros/s/AKfycbx1Rzd1N3KwiACih8ZBBSNvQYYW1IAt-qV9VhgvdhI9722kXH0HC3cDw9lTiktWdPKXqQ/exec";

/***********************
 * LOAD TEAMS
 ***********************/
function loadTeams(){
  fetch(API + "?action=teams&t=" + Date.now()) // üî• cache buster
    .then(r => r.json())
    .then(d => {
      let ul = document.getElementById("teams");
      ul.innerHTML = "";

      if(d.length === 0){
        ul.innerHTML = "<li>No teams yet</li>";
        return;
      }

      d.forEach(t => {
        ul.innerHTML += `<li>${t.name}</li>`;
      });
    })
    .catch(err => {
      console.error(err);
      alert("Failed to load teams");
    });
}

/***********************
 * CREATE TEAM (GET)
 ***********************/
function createTeam(){

  let name = document.getElementById("teamName").value.trim();

  if(!name){
    alert("Enter team name");
    return;
  }

  fetch(
    API +
    "?action=createTeam" +
    "&team_name=" + encodeURIComponent(name) +
    "&admin_id=ADMIN"
  )
  .then(r => r.json())
  .then(res => {

    if(res.status !== "ok"){
      alert("Error creating team");
      return;
    }

    alert("Team created successfully ‚úÖ");

    document.getElementById("teamName").value = "";

    loadTeams(); // refresh list
  })
  .catch(err => {
    console.error(err);
    alert("Network error");
  });
}

// initial load
loadTeams();
</script>

</body>
</html>
